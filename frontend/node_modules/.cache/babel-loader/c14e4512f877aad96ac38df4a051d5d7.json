{"ast":null,"code":"var _jsxFileName = \"/Users/mohamedhosam/Documents/GradProject/UniFreelance/frontend/src/components/student/VideoInterview.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getInterviewDetails, uploadVideo } from '../../services/api';\nimport useVideoRecorder from '../../hooks/useVideoRecorder';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoInterview = () => {\n  _s();\n  const {\n    interviewId\n  } = useParams();\n  const [questions, setQuestions] = useState([]);\n  const [skillId, setSkillId] = useState('');\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [isRecording, setIsRecording] = useState(false);\n  const {\n    startRecording,\n    stopRecording\n  } = useVideoRecorder();\n  useEffect(() => {\n    const fetchQuestions = async () => {\n      var _response$skillId;\n      const response = await getInterviewDetails(interviewId);\n      setQuestions(response.questions || []);\n      setSkillId(((_response$skillId = response.skillId) === null || _response$skillId === void 0 ? void 0 : _response$skillId._id) || response.skillId);\n    };\n    fetchQuestions();\n  }, [interviewId]);\n  const handleStartRecording = () => {\n    setIsRecording(true);\n    startRecording();\n  };\n  const handleStopRecording = async () => {\n    setIsRecording(false);\n    const blob = await stopRecording();\n    if (blob && skillId) {\n      await uploadVideo(skillId, interviewId, currentQuestionIndex, blob);\n      if (currentQuestionIndex < questions.length - 1) {\n        setCurrentQuestionIndex(currentQuestionIndex + 1);\n      } else {\n        // Handle completion of the interview\n        alert('Interview completed successfully!');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Video Interview\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), questions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Question \", currentQuestionIndex + 1, \": \", questions[currentQuestionIndex]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStartRecording,\n        disabled: isRecording,\n        children: \"Start Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStopRecording,\n        disabled: !isRecording,\n        children: \"Stop Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading questions...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n_s(VideoInterview, \"UgRO+8BNE+pXgKNjZz8rgZHieik=\", false, function () {\n  return [useParams, useVideoRecorder];\n});\n_c = VideoInterview;\nexport default VideoInterview;\nvar _c;\n$RefreshReg$(_c, \"VideoInterview\");","map":{"version":3,"names":["React","useState","useEffect","useParams","getInterviewDetails","uploadVideo","useVideoRecorder","jsxDEV","_jsxDEV","VideoInterview","_s","interviewId","questions","setQuestions","skillId","setSkillId","currentQuestionIndex","setCurrentQuestionIndex","isRecording","setIsRecording","startRecording","stopRecording","fetchQuestions","_response$skillId","response","_id","handleStartRecording","handleStopRecording","blob","length","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/mohamedhosam/Documents/GradProject/UniFreelance/frontend/src/components/student/VideoInterview.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getInterviewDetails, uploadVideo } from '../../services/api';\nimport useVideoRecorder from '../../hooks/useVideoRecorder';\n\nconst VideoInterview: React.FC = () => {\n    const { interviewId } = useParams<{ interviewId: string }>();\n    const [questions, setQuestions] = useState<string[]>([]);\n    const [skillId, setSkillId] = useState<string>('');\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState<number>(0);\n    const [isRecording, setIsRecording] = useState<boolean>(false);\n    const { startRecording, stopRecording } = useVideoRecorder();\n\n    useEffect(() => {\n        const fetchQuestions = async () => {\n            const response = await getInterviewDetails(interviewId);\n            setQuestions(response.questions || []);\n            setSkillId(response.skillId?._id || response.skillId);\n        };\n        fetchQuestions();\n    }, [interviewId]);\n\n    const handleStartRecording = () => {\n        setIsRecording(true);\n        startRecording();\n    };\n\n    const handleStopRecording = async () => {\n        setIsRecording(false);\n        const blob = await stopRecording();\n        if (blob && skillId) {\n            await uploadVideo(skillId, interviewId, currentQuestionIndex, blob);\n            if (currentQuestionIndex < questions.length - 1) {\n                setCurrentQuestionIndex(currentQuestionIndex + 1);\n            } else {\n                // Handle completion of the interview\n                alert('Interview completed successfully!');\n            }\n        }\n    };\n\n    return (\n        <div>\n            <h2>Video Interview</h2>\n            {questions.length > 0 ? (\n                <div>\n                    <h3>Question {currentQuestionIndex + 1}: {questions[currentQuestionIndex]}</h3>\n                    <button onClick={handleStartRecording} disabled={isRecording}>\n                        Start Recording\n                    </button>\n                    <button onClick={handleStopRecording} disabled={!isRecording}>\n                        Stop Recording\n                    </button>\n                </div>\n            ) : (\n                <p>Loading questions...</p>\n            )}\n        </div>\n    );\n};\n\nexport default VideoInterview;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}